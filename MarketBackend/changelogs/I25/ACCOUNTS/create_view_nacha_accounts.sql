DELIMITER $$

DROP VIEW IF EXISTS `nacha_accounts`$$

CREATE ALGORITHM=UNDEFINED DEFINER=`supply_usr`@`%` SQL SECURITY DEFINER VIEW `nacha_accounts` AS select `lat`.`descr` AS `acct_type_descr`,`ah`.`account_id` AS `account_id`,`ah`.`entity_type_id` AS `entity_type_id`,`let`.`descr` AS `entity_type_descr`,`ah`.`entity_id` AS `entity_id`,`ah`.`bank_name` AS `bank_name`,`ah`.`country_id` AS `country_id`,`ah`.`account_type_id` AS `account_type_id`,`ah`.`account_status_id` AS `account_status_id`,`ah`.`routing_no` AS `routing_no`,`ah`.`account_no` AS `account_no`,`ltt`.`descr` AS `trans_type_descr`,`ltt`.`transaction_type_id` AS `trans_type_id`,`ah`.`card_holder_name` AS `card_holder_name` from (((((`lu_account_status` `las` join `lu_account_type` `lat`) join `lu_country` `lc`) join `ledger_entity_type` `let`) join `ledger_transaction_types` `ltt`) join `account_hdr` `ah`) where ((`lc`.`id` = `ah`.`country_id`) and (`lat`.`id` = `ah`.`account_type_id`) and (`let`.`ledger_entity_type_id` = `ah`.`entity_type_id`) and (`lat`.`id` in (10,20,30,40,50)) and (`ah`.`enabled_ind` = 1) and (`las`.`id` = 1) and (`las`.`id` = `ah`.`account_status_id`) and (`ltt`.`transaction_type_id` in (100,800,1000,1100,1500,1600,1900,2000))) union select `lat`.`descr` AS `acct_type_descr`,`ah`.`account_id` AS `account_id`,`ah`.`entity_type_id` AS `entity_type_id`,`let`.`descr` AS `entity_type_descr`,`ah`.`entity_id` AS `entity_id`,`ah`.`bank_name` AS `bank_name`,`ah`.`country_id` AS `country_id`,`ah`.`account_type_id` AS `account_type_id`,`ah`.`account_status_id` AS `account_status_id`,`ah`.`routing_no` AS `routing_no`,`ah`.`account_no` AS `account_no`,`ltt`.`descr` AS `trans_type_descr`,`ltt`.`transaction_type_id` AS `trans_type_id`,`ah`.`card_holder_name` AS `card_holder_name` from (((((`lu_account_status` `las` join `lu_account_type` `lat`) join `lu_country` `lc`) join `ledger_entity_type` `let`) join `ledger_transaction_types` `ltt`) join `account_hdr` `ah`) where ((`lc`.`id` = `ah`.`country_id`) and (`lat`.`id` = `ah`.`account_type_id`) and (`let`.`ledger_entity_type_id` = `ah`.`entity_type_id`) and (`lat`.`id` in (10,20,30,40,50)) and (`ah`.`enabled_ind` = 1) and (`las`.`id` = 1) and (`las`.`id` = `ah`.`account_status_id`) and (`ltt`.`transaction_type_id` in (100,800,1000,1100,1500,1600,1900,2000)) and (ucase(`ah`.`bank_name`) = _latin1'JPM') and (`ah`.`entity_type_id` = 30))$$

DELIMITER ;